2020-05-29T19:30:22.437-0400 I CONTROL  [initandlisten] MongoDB starting : pid=36110 port=27017 dbpath=/scratch/echowdh2/mongodb_storage/multi_humor 64-bit host=bhc0086
2020-05-29T19:30:22.437-0400 I CONTROL  [initandlisten] db version v3.4.10
2020-05-29T19:30:22.437-0400 I CONTROL  [initandlisten] git version: 078f28920cb24de0dd479b5ea6c66c644f6326e9
2020-05-29T19:30:22.437-0400 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.1e-fips 11 Feb 2013
2020-05-29T19:30:22.438-0400 I CONTROL  [initandlisten] allocator: tcmalloc
2020-05-29T19:30:22.438-0400 I CONTROL  [initandlisten] modules: none
2020-05-29T19:30:22.438-0400 I CONTROL  [initandlisten] build environment:
2020-05-29T19:30:22.438-0400 I CONTROL  [initandlisten]     distmod: rhel70
2020-05-29T19:30:22.438-0400 I CONTROL  [initandlisten]     distarch: x86_64
2020-05-29T19:30:22.438-0400 I CONTROL  [initandlisten]     target_arch: x86_64
2020-05-29T19:30:22.438-0400 I CONTROL  [initandlisten] options: { net: { port: 27017 }, storage: { dbPath: "/scratch/echowdh2/mongodb_storage/multi_humor" } }
2020-05-29T19:30:22.536-0400 W -        [initandlisten] Detected unclean shutdown - /scratch/echowdh2/mongodb_storage/multi_humor/mongod.lock is not empty.
2020-05-29T19:30:22.559-0400 I -        [initandlisten] Detected data files in /scratch/echowdh2/mongodb_storage/multi_humor created by the 'wiredTiger' storage engine, so setting the active storage engine to 'wiredTiger'.
2020-05-29T19:30:22.559-0400 W STORAGE  [initandlisten] Recovering data from the last clean checkpoint.
2020-05-29T19:30:22.560-0400 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=63857M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] 
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] 
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] 
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] ** WARNING: You are running on a NUMA machine.
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] **          We suggest launching mongod like this to avoid performance problems:
2020-05-29T19:30:25.186-0400 I CONTROL  [initandlisten] **              numactl --interleave=all mongod [other options]
2020-05-29T19:30:25.187-0400 I CONTROL  [initandlisten] 
2020-05-29T19:30:25.187-0400 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is 'always'.
2020-05-29T19:30:25.187-0400 I CONTROL  [initandlisten] **        We suggest setting it to 'never'
2020-05-29T19:30:25.187-0400 I CONTROL  [initandlisten] 
2020-05-29T19:30:25.187-0400 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is 'always'.
2020-05-29T19:30:25.187-0400 I CONTROL  [initandlisten] **        We suggest setting it to 'never'
2020-05-29T19:30:25.187-0400 I CONTROL  [initandlisten] 
2020-05-29T19:30:25.404-0400 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory '/scratch/echowdh2/mongodb_storage/multi_humor/diagnostic.data'
2020-05-29T19:30:25.405-0400 I NETWORK  [thread1] waiting for connections on port 27017
2020-05-29T19:30:26.027-0400 I FTDC     [ftdc] Unclean full-time diagnostic data capture shutdown detected, found interim file, some metrics may have been lost. OK
2020-05-29T19:41:06.625-0400 I NETWORK  [thread1] connection accepted from 192.168.5.24:42876 #1 (1 connection now open)
2020-05-29T19:41:06.646-0400 I NETWORK  [conn1] received client metadata from 192.168.5.24:42876 conn1: { driver: { name: "PyMongo", version: "3.9.0" }, os: { type: "Linux", name: "Linux", architecture: "x86_64", version: "3.10.0-957.1.3.el7.x86_64" }, platform: "CPython 3.7.4.final.0" }
2020-05-29T19:41:07.400-0400 I -        [conn1] end connection 192.168.5.24:42876 (1 connection now open)
2020-05-29T19:42:56.642-0400 I NETWORK  [thread1] connection accepted from 192.168.5.24:43090 #2 (1 connection now open)
2020-05-29T19:42:56.663-0400 I NETWORK  [conn2] received client metadata from 192.168.5.24:43090 conn2: { driver: { name: "PyMongo", version: "3.9.0" }, os: { type: "Linux", name: "Linux", architecture: "x86_64", version: "3.10.0-957.1.3.el7.x86_64" }, platform: "CPython 3.7.4.final.0" }
2020-05-29T19:42:58.241-0400 I NETWORK  [thread1] connection accepted from 192.168.5.24:43092 #3 (2 connections now open)
2020-05-29T19:42:58.241-0400 I NETWORK  [conn3] received client metadata from 192.168.5.24:43092 conn3: { driver: { name: "PyMongo", version: "3.9.0" }, os: { type: "Linux", name: "Linux", architecture: "x86_64", version: "3.10.0-957.1.3.el7.x86_64" }, platform: "CPython 3.7.4.final.0" }
2020-05-29T19:42:58.427-0400 I INDEX    [conn3] build index on: albert_embedding.fs.files properties: { v: 2, key: { filename: 1, uploadDate: 1 }, name: "filename_1_uploadDate_1", ns: "albert_embedding.fs.files" }
2020-05-29T19:42:58.427-0400 I INDEX    [conn3] 	 building index using bulk method; build may temporarily use up to 500 megabytes of RAM
2020-05-29T19:42:58.428-0400 I INDEX    [conn3] build index done.  scanned 0 total records. 0 secs
2020-05-29T19:42:58.428-0400 I COMMAND  [conn3] command albert_embedding.$cmd command: createIndexes { createIndexes: "fs.files", indexes: [ { key: { filename: 1, uploadDate: 1 }, unique: false, name: "filename_1_uploadDate_1" } ] } numYields:0 reslen:113 locks:{ Global: { acquireCount: { r: 1, w: 1 } }, Database: { acquireCount: { W: 1 } }, Collection: { acquireCount: { w: 1 } } } protocol:op_query 183ms
2020-05-29T19:42:58.555-0400 I INDEX    [conn3] build index on: albert_embedding.fs.chunks properties: { v: 2, unique: true, key: { files_id: 1, n: 1 }, name: "files_id_1_n_1", ns: "albert_embedding.fs.chunks" }
2020-05-29T19:42:58.555-0400 I INDEX    [conn3] 	 building index using bulk method; build may temporarily use up to 500 megabytes of RAM
2020-05-29T19:42:58.556-0400 I INDEX    [conn3] build index done.  scanned 0 total records. 0 secs
2020-05-29T19:42:58.556-0400 I COMMAND  [conn3] command albert_embedding.$cmd command: createIndexes { createIndexes: "fs.chunks", indexes: [ { key: { files_id: 1, n: 1 }, unique: true, name: "files_id_1_n_1" } ] } numYields:0 reslen:113 locks:{ Global: { acquireCount: { r: 1, w: 1 } }, Database: { acquireCount: { W: 1 } }, Collection: { acquireCount: { w: 1 } } } protocol:op_query 126ms
2020-05-29T19:42:58.680-0400 I COMMAND  [conn3] command albert_embedding.runs command: insert { insert: "runs", ordered: true, documents: [ { _id: 1, experiment: { name: "multimodal_humor", base_dir: "/gpfs/fs1/home/echowdh2/Research_work/Multimodal_Humor", sources: [ [ "driver.py", ObjectId('5ed19e0274100b5f3146dc6b') ], [ "models.py", ObjectId('5ed19e0274100b5f3146dc6d') ], [ "transformer/Models.py", ObjectId('5ed19e0274100b5f3146dc6f') ], [ "transformer/Optim.py", ObjectId('5ed19e0274100b5f3146dc71') ], [ "transformer/__init__.py", ObjectId('5ed19e0274100b5f3146dc73') ] ], dependencies: [ "h5py==2.10.0", "numpy==1.18.1", "sacred==0.8.0", "scikit-learn==0.22.1", "torch==1.4.0", "tqdm==4.42.0" ], repositories: [ { url: "git@github.com:WasifurRahman/Multimodal_Humor.git", commit: "65e75f37264d1a6f54ba42907777450e0c5cec53", dirty: true }, { url: "git@github.com:WasifurRahman/Multimodal_Humor.git", commit: "65e75f37264d1a6f54ba42907777450e0c5cec53", dirty: true }, { url: "git@github.com:WasifurRahman/Multimodal_Humor.git", commit: "65e75f37264d1a6f54ba42907777450e0c5cec53", dirty: true }, { url: "git@github.com:WasifurRahman/Multimodal_Humor.git", commit: "65e75f37264d1a6f54ba42907777450e0c5cec53", dirty: true }, { url: "git@github.com:WasifurRahman/Multimodal_Humor.git", commit: "65e75f37264d1a6f54ba42907777450e0c5cec53", dirty: true } ], mainfile: "driver.py" }, format: "MongoObserver-0.7.0", command: "driver", host: { hostname: "bhg0024", os: [ "Linux", "Linux-3.10.0-957.1.3.el7.x86_64-x86_64-with-redhat-7.6-Maipo" ], python_version: "3.7.4", cpu: "Intel(R) Xeon(R) CPU E5-2695 v2 @ 2.40GHz", gpus: { gpus: [ { model: "Tesla K20Xm", total_memory: 5700, persistence_mode: false }, { model: "Tesla K20Xm", total_memory: 5700, persistence_mode: false } ], driver_version: "410.72" }, ENV: {} }, start_time: new Date(1590795778237), config: { NN1Config: { drop: 0.7, shapes: 64 }, NN2Config: { drop: 0.2, shapes: 32 }, audio_indices: null, best_model_path: "/scratch/echowdh2/saved_models_from_projects/multimodal_humor/30_best_model.chkpt", config: { batchsize: 256, h_dims: [ 64, 8, 16 ], input_dims: [ 1, 81, 75, 768 ], lr: 0.001, memsize: 300, momentum: 0.6, num_epochs: 50, windowsize: 2 }, dataset_location: "../processed_multimodal_data/TED_humor_albert", dataset_name: "TED_humor_albert", dev_batch_size: 2645, device: { py/reduce: [ { py/type: "torch.device" }, { py/tuple: [ "cuda" ] }, null, null, null ] }, epoch: 30, experiment_config_index: 0, gamma1Config: { drop: 0.7, shapes: 32 }, gamma2Config: { drop: 0.0, shapes: 32 }, ha: 8, hidden_audio: 48, hidden_text: 156, hidden_video: 64, hl: 64, hv: 16, input_dims: [ 1, 81, 75, 768 ], max_seq_len: 20, mfn_configs: [ { batchsize: 256, h_dims: [ 64, 8, 16 ], input_dims: [ 1, 81, 75, 768 ], lr: 0.001, memsize: 300, momentum: 0.6, num_epochs: 50, windowsize: 2 }, { drop: 0.7, shapes: 64 }, { drop: 0.2, shapes: 32 }, { drop: 0.7, shapes: 32 }, { drop: 0.0, shapes: 32 }, { drop: 0.5, shapes: 128 } ], multimodal_context_configs: { audio_in_drop: 0.5, d_inner_hid: 2048, d_k: 64, d_model: 512, d_v: 64, d_word_vec: 512, dropout: 0.1, embs_share_weight: true, label_smoothing: true, max_token_seq_len: 5, mem_in_drop: 0.5, n_head: 8, n_layers: 6, n_source_features: 268, n_warmup_steps: 4000, proj_share_weight: true, text_in_drop: 0.5, video_in_drop: 0.1 }, node_index: 30, num_context_sequence: 5, num_workers: 2, omit_corrected: null, omitted_feature_name: null, outConfig: { drop: 0.5, shapes: 128 }, padding_value: 0.0, prototype: true, save_mode: "best", save_model: "best_model", seed: 170233882, selective_audio_visual_feature_omission: [ { indices: [ 44, 48, 61, 65 ], modality: "video", name: "happiness" }, { indices: [ 40, 42, 50, 57, 59, 67 ], modality: "video", name: "sadness" }, { indices: [ 40, 41, 43, 55, 57, 58, 60, 72 ], modality: "video", name: "surprise" }, { indices: [ 42, 43, 45, 53, 59, 60, 62, 70 ], modality: "video", name: "anger" }, { indices: [ 46, 50, 51, 63, 67, 68 ], modality: "video", name: "disgust" }, { indices: [ 40, 41, 42, 43, 45, 52, 55, 57, 58, 59, 60, 62, 69, 72 ], modality: "video", name: "fear" }, { indices: [ 40, 41, 42, 43, 44, 45, 56, 57, 58, 59, 60, 61, 62, 74 ], modality: "video", name: "upper_face" }, { indices: [ 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72 ], modality: "video", name: "lower_face" }, { indices: [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39 ], modality: "video", name: "shape_params" }, { indices: [ 0 ], modality: "audio", name: "pitch" }, { indices: [ 4 ], modality: "audio", name: "harmonic" }, { indices: [ 3 ], modality: "audio", name: "quotient" }, { indices: [ 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35 ], modality: "audio", name: "mcep" }, { indices: [ 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60 ], modality: "audio", name: "pdm" }, { indices: [ 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73 ], modality: "audio", name: "pdd" }, { indices: [ 75, 76, 77, 78, 79 ], modality: "audio", name: "formant" }, { indices: [ 8 ], modality: "audio", name: "peak_slope" } ], selectively_omitted_index: -1, shuffle: true, test_batch_size: 3305, text_indices: null, train_batch_size: 256, unimodal_context: { audio_lstm_input: 81, hidden_sizes: [ 156, 48, 64 ], text_lstm_input: 768, video_lstm_input: 75 }, use_context: true, use_context_audio: true, use_context_text: true, use_context_video: true, use_punchline: true, use_punchline_audio: true, use_punchline_text: true, use_punchline_video: true, video_indices: null }, meta: { command: "driver", options: { --beat-interval: null, --capture: null, --comment: null, --debug: false, --enforce_clean: false, --file_storage: null, --force: false, --help: false, --loglevel: null, --mongo_db: null, --name: null, --pdb: false, --print-config: false, --priority: null, --queue: false, --s3: null, --sql: null, --tiny_db: null, --unobserve: false } }, status: "RUNNING", resources: [], artifacts: [], captured_out: "", info: {}, heartbeat: null } ] } ninserted:1 keysInserted:1 numYields:0 reslen:44 locks:{ Global: { acquireCount: { r: 3, w: 3 } }, Database: { acquireCount: { w: 2, W: 1 } }, Collection: { acquireCount: { w: 2 } } } protocol:op_query 104ms
2020-05-29T19:42:59.148-0400 I -        [conn3] end connection 192.168.5.24:43092 (2 connections now open)
2020-05-29T19:42:59.148-0400 I -        [conn2] end connection 192.168.5.24:43090 (1 connection now open)
2020-05-29T19:52:54.032-0400 I NETWORK  [thread1] connection accepted from 192.168.5.24:44128 #4 (1 connection now open)
2020-05-29T19:52:54.053-0400 I NETWORK  [conn4] received client metadata from 192.168.5.24:44128 conn4: { driver: { name: "PyMongo", version: "3.9.0" }, os: { type: "Linux", name: "Linux", architecture: "x86_64", version: "3.10.0-957.1.3.el7.x86_64" }, platform: "CPython 3.7.4.final.0" }
2020-05-29T19:52:54.632-0400 I -        [conn4] end connection 192.168.5.24:44128 (1 connection now open)
